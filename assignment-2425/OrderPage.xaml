<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:assignment_2425"
             x:Class="assignment_2425.OrderPage"
             BackgroundColor="#131313">

    <Grid>
        <!-- Main grid layout with 4 rows: navbar, title, category tabs, dish list -->
        <Grid RowDefinitions="Auto,Auto,Auto,*">

            <!-- Sticky Navbar -->
            <local:StickyNavBar Grid.Row="0" />

            <!-- Menu Section Title -->
            <Label Grid.Row="1"
                   HorizontalOptions="Center"
                   Margin="0,20,0,10"
                   HorizontalTextAlignment="Center">
                <Label.FormattedText>
                    <FormattedString>
                        <Span Text="Our " TextColor="#7ECB37" FontSize="40"/>
                        <Span Text="Menu" TextColor="#FECA18" FontSize="40"/>
                    </FormattedString>
                </Label.FormattedText>
            </Label>

            <!-- Scrollable Category Navigation Tabs -->
            <ScrollView Grid.Row="2" Orientation="Horizontal" Padding="10,5">
                <HorizontalStackLayout Spacing="12">
                    <Button Text="Meals" Clicked="ScrollToMeals" />
                    <Button Text="Portions" Clicked="ScrollToPortions" />
                    <Button Text="Snacks" Clicked="ScrollToSnacks" />
                    <Button Text="Soups" Clicked="ScrollToSoups" />
                    <Button Text="Drinks" Clicked="ScrollToDrinks" />
                </HorizontalStackLayout>
            </ScrollView>

            <!-- Dish List: dynamically bound to all available menu items -->
            <CollectionView x:Name="DishList"
                            Grid.Row="3"
                            ItemsSource="{Binding Dishes}"
                            SelectionMode="None">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Margin="10"
                               Padding="10"
                               BackgroundColor="#1E1E1E"
                               CornerRadius="10">
                            <VerticalStackLayout>
                                <Button Text="{Binding Name}"
                                        FontSize="16"
                                        FontFamily="PalanquinDarkMedium"
                                        TextColor="White"
                                        BackgroundColor="Transparent"
                                        Pressed="OnDishPressed"
                                        Released="OnDishReleased"
                                        CommandParameter="{Binding}" />
                                <Label Text="{Binding DisplayPrice}"
                                       TextColor="#FECA18"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       HorizontalOptions="Center"/>
                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>

        <!-- Floating Basket Button (appears when items are added) -->
        <Button x:Name="BasketButton"
                BackgroundColor="#7ECB37"
                TextColor="White"
                CornerRadius="30"
                Padding="15,10"
                FontAttributes="Bold"
                FontSize="16"
                HorizontalOptions="End"
                VerticalOptions="End"
                Margin="20"
                Clicked="OnBasketClicked"
                IsVisible="False"
                WidthRequest="350"
                HeightRequest="50"
                ContentLayout="Left,40">
            <Button.ImageSource>
                <FileImageSource File="basket_icon.png" />
            </Button.ImageSource>
        </Button>

    </Grid>
</ContentPage>
