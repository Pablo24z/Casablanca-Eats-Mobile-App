<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="assignment_2425.StickyNavBar"
             BackgroundColor="#FECA18"
             HeightRequest="70">

    <AbsoluteLayout>

        <!-- Main nav grid sits fixed at the top -->
        <Grid x:Name="NavRoot"
              Padding="10"
              ColumnSpacing="10"
              RowDefinitions="Auto,Auto"
              BackgroundColor="#FECA18"
              ZIndex="999"
              AbsoluteLayout.LayoutBounds="0,0,1,70"
              AbsoluteLayout.LayoutFlags="WidthProportional">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Brand logo with tap to return to MainPage -->
            <Image Source="casalonglogo_light.png"
                   HeightRequest="40"
                   WidthRequest="125"
                   Aspect="AspectFit"
                   VerticalOptions="Center"
                   HorizontalOptions="Start"
                   Grid.Column="0">
                <Image.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnLogoTapped" />
                </Image.GestureRecognizers>
            </Image>

            <!-- Tablet/Desktop: Button navigation -->
            <StackLayout x:Name="NavButtonsPanel"
                         Orientation="Horizontal"
                         Spacing="20"
                         VerticalOptions="Center"
                         HorizontalOptions="Center"
                         Grid.ColumnSpan="1"
                         Grid.Column="1"
                         IsVisible="False">
                <Button Text="Menu" Style="{StaticResource NavBarButtonStyle}" Clicked="OnMenuClicked" />
                <Button Text="Contact" Style="{StaticResource NavBarButtonStyle}" Clicked="OnContactClicked" />
                <Button Text="Order" Style="{StaticResource NavBarButtonStyle}" Clicked="OnOrderClicked" />
            </StackLayout>

            <!-- Theme toggle button -->
            <ImageButton x:Name="ThemeToggleButton"
                         Source="moon_icon.svg"
                         WidthRequest="30"
                         HeightRequest="30"
                         BackgroundColor="Transparent"
                         Clicked="OnToggleThemeClicked"
                         Grid.Column="2" />

            <!-- Hamburger for mobile view -->
            <ImageButton x:Name="HamburgerButton"
                         Source="menu_icon.svg"
                         WidthRequest="30"
                         HeightRequest="30"
                         BackgroundColor="Transparent"
                         Clicked="OnHamburgerClicked"
                         Grid.Column="3"
                         IsVisible="True" />

            <!-- Dropdown flyout menu (used on smaller screens) -->
            <Frame x:Name="FlyoutMenu"
                   BackgroundColor="#FECA18"
                   BorderColor="Transparent"
                   CornerRadius="0"
                   Padding="0"
                   IsVisible="False"
                   HasShadow="False"
                   InputTransparent="False"
                   ZIndex="99"
                   AbsoluteLayout.LayoutBounds="0,70,1,AutoSize"
                   AbsoluteLayout.LayoutFlags="WidthProportional">

                <HorizontalStackLayout Spacing="8" InputTransparent="False">
                    <Button Text="Contact" Clicked="OnContactClicked" Style="{StaticResource NavBarButtonStyle}" />
                    <Button Text="Menu" Clicked="OnMenuClicked" Style="{StaticResource NavBarButtonStyle}" />
                    <Button Text="Order" Clicked="OnOrderClicked" Style="{StaticResource NavBarButtonStyle}" />
                </HorizontalStackLayout>
            </Frame>
        </Grid>

    </AbsoluteLayout>
</ContentView>
