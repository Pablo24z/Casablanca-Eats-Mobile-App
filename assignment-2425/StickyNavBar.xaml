<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="assignment_2425.StickyNavBar"
             BackgroundColor="#FECA18"
             HeightRequest="70">

    <AbsoluteLayout>
        <!-- Sticky Nav Grid -->
        <Grid x:Name="NavRoot"
              Padding="10"
              ColumnSpacing="10"
              RowDefinitions="Auto,Auto"
              BackgroundColor="#FECA18"
              ZIndex="999"
              AbsoluteLayout.LayoutBounds="0,0,1,70"
              AbsoluteLayout.LayoutFlags="WidthProportional">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Logo -->
            <Image Source="casalonglogo_light.png"
                   HeightRequest="40"
                   WidthRequest="125"
                   Aspect="AspectFit"
                   VerticalOptions="Center"
                   HorizontalOptions="Start"
                   Grid.Column="0">
                <Image.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnLogoTapped" />
                </Image.GestureRecognizers>
            </Image>

            <!-- Tablet/Desktop Nav Buttons -->
            <StackLayout x:Name="NavButtonsPanel"
                         Orientation="Horizontal"
                         Spacing="20"
                         VerticalOptions="Center"
                         HorizontalOptions="Center"
                         Grid.ColumnSpan="2"
                         Grid.Column="1"
                         IsVisible="False">
                <Button Text="Menu" Style="{StaticResource NavBarButtonStyle}" Clicked="OnMenuClicked" />
                <Button Text="Contact" Style="{StaticResource NavBarButtonStyle}" Clicked="OnContactClicked" />
                <Button Text="Order" Style="{StaticResource NavBarButtonStyle}" Clicked="OnOrderClicked" />
            </StackLayout>

            <!-- Theme Toggle -->
            <ImageButton x:Name="ThemeToggleButton"
                         Source="moon_icon.svg"
                         WidthRequest="30"
                         HeightRequest="30"
                         BackgroundColor="Transparent"
                         Clicked="OnToggleThemeClicked"
                         Grid.Column="2" />

            <!-- Hamburger (Mobile Only) -->
            <ImageButton x:Name="HamburgerButton"
                         Source="menu_icon.svg"
                         WidthRequest="30"
                         HeightRequest="30"
                         BackgroundColor="Transparent"
                         Clicked="OnHamburgerClicked"
                         Grid.Column="3"
                         IsVisible="True" />


            <!-- Flyout Menu (Dropdown) -->
            <Frame x:Name="FlyoutMenu"
                   BackgroundColor="#FECA18"
                   BorderColor="#131313"
                   CornerRadius="0"
                   Padding="10"
                   IsVisible="False"
                   HasShadow="True"
                   InputTransparent="False"
                   ZIndex="9999"
                   AbsoluteLayout.LayoutBounds="0,70,1,AutoSize"
                   AbsoluteLayout.LayoutFlags="WidthProportional">

                <VerticalStackLayout Spacing="10"
                            InputTransparent="False">
                    <Button Text="Menu"
                            Clicked="OnMenuClicked"
                            Style="{StaticResource NavBarButtonStyle}" />
                    <Button Text="Contact"
                            Clicked="OnContactClicked"
                            Style="{StaticResource NavBarButtonStyle}" />
                    <Button Text="Order"
                            Clicked="OnOrderClicked"
                            Style="{StaticResource NavBarButtonStyle}" />
                </VerticalStackLayout>
            </Frame>
        </Grid>
    </AbsoluteLayout>
</ContentView>
